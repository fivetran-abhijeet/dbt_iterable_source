version: 2

models:
  - name: stg_iterable__event
    description: Table containing individual events within campaigns.        
    loaded_at_field: _fivetran_synced
    columns:
      - name: _fivetran_id
        description: The primary key of the table generated by Fivetran.
        tests:
          - unique
          - not_null

  - name: stg_iterable__event_extension
    description: Table containing addition properties from the event table.
    loaded_at_field: _fivetran_synced

  - name: stg_iterable__campaign_history
    description: Table containing a history of campaigns.
    loaded_at_field: _fivetran_synced
    tests:
      - dbt_utils.unique_combination_of_columns:
          combination_of_columns:
            - campaign_id
            - updated_at
    columns:
      - name: campaign_id
        description: The unique identifier of the campaign.
      - name: updated_at
        description: Timestamp of when the campaign was updated.

  - name: stg_iterable__campaign_metrics
    description: Table containing aggregated metrics for each campaign.
    loaded_at_field: _fivetran_synced
    tests:
      - dbt_utils.unique_combination_of_columns:
          combination_of_columns:
            - date
            - campaign_id
    columns:
      - name: date
        description: The date the campaign 
      - name: campaign_id
        description: The unique identifier of the campaign.

  - name: stg_iterable__list
    description: Table containing each list and its corresponding details.
    loaded_at_field: _fivetran_synced
    columns:
      - name: list_id
        description: The unique list identifier.
        tests:
          - unique
          - not_null

  - name: stg_iterable__user_history
    description: Table containing individual user history information.
    loaded_at_field: _fivetran_synced
    tests:
      - dbt_utils.unique_combination_of_columns:
          combination_of_columns:
            - email
            - updated_at
    columns:
      - name: email
        description: The email of the user.
      - name: updated_at
        description: Timestamp of the date the user record was updated.
  
